name: CI

on:
  push:
  schedule:
    - cron: '0 0 */1 * *'

jobs:
  test:
    name: Testing pipeline
    ## to switch to github-hosted runner, change runs-on to "ubuntu-latest"
    ## and STATA_TESTS to false
    runs-on: self-hosted
    # runs-on: ubuntu-latest
    env:
      STATA_TESTS: true
      # STATA_TESTS: false
    steps:
      - uses: actions/checkout@v2
      - shell: bash
        name: Run all tests
        run: conda activate gpl-covid && bash tests/run_tests.sh
